# 面试专题



## kill -9 PID



底层原理



kill默认给指定进程发送一个信号，比如-15，就是温和的终止方式，进程在接收到-15信号也就是`SIGTERM`的时候，会在结束前做一些清理工作。



-9发送的是`SIGKILL` 信号，这个信号接收到，内核会立刻立刻终止该进程。

内核层面就是

- 系统通过进程标识符<PID> 来定位用于管理进程的进程控制块<PCB>
- <PCB>里面存储着一个进程的各种状态信息，一些基本的状态、程序计数器、寄存器等都在里面
- -9信号接收之后，<PCB>里面的进程状态会立刻设置为终止
- 内核立刻释放进程占用的系统资源
- -9绕过了进程的可能信号处理程序，拥有最高优先级处理级别。





## 磁盘文件上云的底层原理



- 磁盘读取，判断页缓存是否有数据，有的话直接用，没有就缺页中断，将数据加载到页缓存里
- 数据处理与拷贝，CPU将数据从页缓存拷贝到内核的套接字缓冲区，这就是用户态和内核态的上下文切换。这里面可能会出现零拷贝
- 协议封装，传输层将数据分割为小的数据段，封装TCP报文头，MAC地址啥的
- 网卡传输，协议栈处理完之后产生软中断通知网卡驱动，驱动从套接字缓冲区读取数据之后，通过DMA技术将数据拷贝到网卡的数据缓冲区，网卡再进行发送。