通信原理

http协议：

X-Forwarded-For：127.0.0.1

X-Forwarded-For:127.0.0.1

User-Agent:Chorme

Referer:http://baidu.com



## 硬件设备





华为交换机，交换机用在多台电脑，类似集线器，不支持拨号功能，不支持nat



路由器，出口，光猫的线lan口等，做nat转换。



CRT调试软件





## ip地址规划

IP的规则

| ip类型 | 子网        | 子网掩码      |
| ------ | ----------- | ------------- |
| A      | 10.0.0.0    | 255.0.0.0     |
| B      | 172.16.0.0  | 255.255.0.0   |
| C      | 192.168.0.1 | 255.255.255.0 |



每一位十进制数转为二进制进行表示

0-255

网络地址：同一广播内第一个IP

广播地址：同一广播内最后一个IP

有效地址：除了网络地址和广播地址外的所有可用地址



例子：

A类地址

ip地址：10.0.0.0 子网掩码：255.0.0.0

网络地址：10.0.0.0

广播地址：10.255.255.255



B类地址

ip地址：172.16.0.0 子网掩码：255.255.0.0

网络地址：172.16.0.0

广播地址：172.16.255.255



例子：

ip地址：172.17.0.0 子网掩码：255.255.255.0

网络地址：172.17.0.0

广播地址：172.17.0.255







## 子网掩码的计算



子网掩码用来隔离广播域



192.168.1.1/24

24就是24位

子网掩码中一个255代表8位，3个255就是24位

总结就是加位要从左往右，所以24到25要加个128，就是后面128的由来



例子：

192.168.1.1/24 

子网掩码就是255.255.255.0



例子：

192.168.1.1/25

子网掩码就是255.255.255.128



例子：

192.168.1.1/26

子网掩码为255.255.255.192





例子：

192.168.1.1/23

子网掩码为255.255.254.0



例子：

192.168.1.1/25

子网掩码为255.255.255.128

现求网络地址和广播地址：

网络地址：192.168.1.0

广播地址：192.168.1.127



例子：

192.168.1.129/25

子网掩码为255.255.255.128

现求网络地址和广播地址：

网络地址：192.168.1.128

广播地址：192.168.1.255



## 网络七层模型



| 层级       | 作用                             |
| ---------- | -------------------------------- |
| 应用层     | 为计算机用户提供接口和服务       |
| 表示层     | 数据处理（编码解码、加密解密）   |
| 会话层     | 管理（建立、维护、重连）通信会话 |
| 传输层     | 管理端到端的通信连接             |
| 网络层     | 数据路由（决定数据在网络的路径） |
| 数据链路层 | 管理相邻节点之间的数据通信       |
| 物理层     | 数据通信的光电物理特性           |





## TCP/IP协议

| 层级       | 作用 |
| ---------- | ---- |
| 应用层     |      |
| 传输层     |      |
| 网络层     |      |
| 网络接口层 |      |



Windows解析DNS

cmd里面输入

```cmd
nslookup
```



## 三张表

一点细节都没讲到，面试的时候看我问不问死你

ARP表、MAC地址表、路由表



## 软件使用

建议还是别用他的软件了，什么年代

MobaXterm 这个更加万能，什么都可以连接

Termius 终端管理工具比较美观





## Ensp

学习一下命令即可





## 设备基础命令





```
进入系统试图			system-view
查看设备全部配置		display current-configuration
查看二层端口状态		display interface brief
配置vlan				[Huawei]vlan 10
查看vlan信息			display vlan
保存配置信息				<Huawei>save
重启设备				<Huawei>rebot
退出					quit
查看当前视图下信息		display this
查看三层接口			display ip interface brief
Telnet登录			<Huawei>talnet 192.168.10.1
查看端口聚合				[Huawei]display interface Eth-Trunk
进入接口视图			[Huawei]interface GigabitEthernet 0/0/1
```





## 配置trunk

trunk 除了PID，其他的全部打标签

trunk 透传多个vlan时调用

```
[Huawei-GigabitEthernet0/0/1]port link-type trunk
允许vlan10 和 vlan 20 通过

[Huawei-GigabitEthernet0/0/1] port trunk allow-pass vlan 10 20 

允许所有的vlan通过
[Huawei-GigabitEthernet0/0/1] port trunk allow-pass vlan all
```



## 给接口2加入到vlan100

```
interface GigabitEthernet0/0/2
port linx-type access
port default vlan 100
```



## 配置三层svi接口

配置在三层交换机上面，配置完之后吗多个网段可以进行互联互通

```
进入接口视图		[Huawei]interface Vlanif 100
配置ip地址		[Huawei-Vlanif100]ip address 192.168.100.1 255.255.255.0
```



## telnet远程登陆管理

```
第一步：打开telnet
[Huawei] telnet server enable

第二步：配置虚拟通道
进入到通道视图：	user-interface vty 0 4
配置认证模式:		authentication-mode aaa
配置允许的协议：	protocol inbound all

第三步：用户名密码的配置
[Huawei] aaa

配置用户名的admin，密码为admin123
[Huawei-aaa] local-user admin password cipher admin123

配置用户级别
[Huawei-aaa] local-user admin privilege level 15
```



## 配置端口聚合

```
第一步：创建聚合口
[Huawei]interface Eth-trunk 1

第二步：加入聚合口
[Huawei]interface GigabitEthernet 0/0/1
[Huawei-GigabitEthernet0/0/1] eth-trunk 1
[Huawei]interface GigabitEthernet 0/0/2
[Huawei-GigabitEthernet0/0/2]eth-trunk 1
```



## 静态路由

```
目标网段 子网掩码 下一跳地址
```



```
ip route-static 192.168.1.0 255.255.255.0 192.168.2.1
```



## 缺省路由

```
目标网段 子网掩码 下一跳地址
```



```
ip route-static 0.0.0.0 0.0.0.0 192.168.2.1
```



## ACL配置

应用在入方向和出方向上

限制某主机拒绝访问，限制特定主机访问，其他的所有拒绝

nat的时候也是要调用ACL

```
acl number 2000
rule 5 permit source 192.168.1.0 0.0.0.255
```



## NAT配置

把私网ip地址转换为公网ip进行互联网的访问

```
interface GigabitEthernet0/0/0
nat outbound 2000
```



## 端口映射

公网访问内网服务就需要做端口映射

```
interface GigabitEthernet0/0/0
nat server protocol tcp global current-interface www inside 192.168.2.100 www
```











